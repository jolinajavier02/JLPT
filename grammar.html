<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Mastery - NihongoMastery</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Noto+Sans+JP:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        :root {
            --sidebar-width: 260px;
        }

        body {
            background: #f8fafc;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }



        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            width: 98%;
            display: flex;
            gap: 1.5rem;
            flex: 1;
            height: calc(100vh - 100px);
            padding: 1rem 0;
            align-items: stretch;
        }

        /* Sidebar Styling */
        .sidebar {
            width: var(--sidebar-width);
            background: white;
            border-radius: 20px;
            padding: 1.5rem 1rem;
            height: 100%;
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(188, 0, 45, 0.1);
        }

        .sidebar-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            text-align: center;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .topic-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .topic-item {
            padding: 0.8rem 1.2rem;
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
            color: var(--text-light);
            margin-bottom: 0.3rem;
            font-weight: 600;
        }

        .topic-item:hover {
            background: #f1f5f9;
            color: var(--primary-color);
        }

        .topic-item.active {
            background: #fff5f5;
            color: var(--primary-color);
            border-left: 4px solid var(--primary-color);
        }

        /* Content Area Styling */
        .content-area {
            flex: 1;
            display: flex;
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid rgba(188, 0, 45, 0.1);
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .book-page {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            position: relative;
            background: white;
        }



        .book-page:first-child {
            border-right: 1px solid #eee;
        }

        /* Book Spine Effect */
        .content-area::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 40px;
            transform: translateX(-50%);
            background: linear-gradient(to right,
                    rgba(0, 0, 0, 0.03) 0%,
                    rgba(0, 0, 0, 0.01) 40%,
                    rgba(0, 0, 0, 0) 50%,
                    rgba(0, 0, 0, 0.01) 60%,
                    rgba(0, 0, 0, 0.03) 100%);
            pointer-events: none;
        }

        .lesson-header {
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        .lesson-header h1 {
            color: var(--primary-color);
            font-size: 1.6rem;
            background: none;
            -webkit-text-fill-color: initial;
        }

        .book-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: white;
            border: 1px solid var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--primary-color);
            z-index: 10;
            box-shadow: var(--shadow-md);
        }

        .book-nav:hover {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 12px rgba(188, 0, 45, 0.3);
        }

        .book-nav:active {
            background: #a00026;
            transform: translateY(-50%) scale(0.95);
        }

        .book-nav.prev {
            left: 10px;
        }

        .book-nav.next {
            right: 10px;
        }

        .example-box {
            background: #fff5f5;
            padding: 1.2rem;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        h3,
        h4 {
            color: var(--primary-color) !important;
        }

        .grammar-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.2rem;
            margin-top: 1.2rem;
        }

        .formation-box {
            background: #fff;
            border: 1px solid #eee;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 0.8rem;
            margin-bottom: 1.2rem;
            border-left: 4px solid var(--primary-color);
        }

        .mistake-tag {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: #fff5f5;
            color: var(--primary-color);
            font-size: 0.8rem;
            text-transform: uppercase;
        }

        .conjugation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .conjugation-table th,
        .conjugation-table td {
            padding: 0.8rem;
            border: 1px solid #eee;
            text-align: left;
        }

        .conjugation-table th {
            background: #fff5f5;
            color: var(--primary-color);
        }



        @media (max-width: 992px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                position: static;
                margin-bottom: 1rem;
            }

            .topic-list {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
            }
        }
    </style>
</head>

<body>
    <header class="main-header">
        <div class="container">
            <nav>
                <a href="home.html" class="logo">NihongoMastery</a>
                <div class="nav-links">
                    <a href="home.html" class="nav-link">Dashboard</a>
                    <a href="test.html" class="header-btn">Take Test</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="main-container fixed-header-offset">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-title">Grammar Mastery</div>
            <ul class="topic-list">
                <li class="topic-item active" onclick="showLesson('basics', this)">Sentence Basics</li>
                <li class="topic-item" onclick="showLesson('verbs', this)">Verb Basics</li>
                <li class="topic-item" onclick="showLesson('adjectives', this)">Adjectives</li>
                <li class="topic-item" onclick="showLesson('existence', this)">Question & Existence</li>
                <li class="topic-item" onclick="showLesson('te-form', this)">Te-form</li>
            </ul>

            <ul class="topic-list" style="margin-top: auto;">
                <li class="topic-item" onclick="window.location.href='particles.html'">Go to Particles</li>
            </ul>
        </aside>

        <!-- Content Area -->
        <main class="content-area" id="book-container">
            <div class="book-nav prev" onclick="navigateLesson(-1)">←</div>
            <div class="book-nav next" onclick="navigateLesson(1)">→</div>
            <div id="book-pages-wrapper" style="display: flex; width: 100%; height: 100%;">
                <!-- Pages will be injected here -->
            </div>
        </main>
    </div>

    <script>
        const lessons = {
            'basics': `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <h1>1. Sentence Basics (SOV)</h1>
                    </div>
                    <p>Japanese sentences follow a <strong>Subject + Object + Verb (SOV)</strong> structure. This is different from English (SVO). Particles are used to mark the grammatical role of each word.</p>
                    
                    <div class="formation-box">
                        <strong>Core Particles:</strong><br>
                        • <strong>は (wa):</strong> Marks the topic of the sentence.<br>
                        • <strong>を (o):</strong> Marks the direct object receiving the action.<br>
                        • <strong>に (ni):</strong> Indicates direction, time, or destination.<br>
                        • <strong>で (de):</strong> Indicates where an action takes place.
                    </div>

                    <div class="grammar-grid">
                        <div class="example-box">
                            <h4>Detailed Examples</h4>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>私</rb><rt>わたし</rt></ruby>は<ruby><rb>寿司</rb><rt>すし</rt></ruby>を<ruby><rb>食</rb><rt>た</rt></ruby>べます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Watashi wa sushi o tabemasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I eat sushi.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>田中</rb><rt>たなか</rt></ruby>さんは<ruby><rb>本</rb><rt>ほん</rt></ruby>を<ruby><rb>読</rb><rt>よ</rt></ruby>みます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Tanaka-san wa hon o yomimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Mr. Tanaka reads a book.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>私</rb><rt>わたし</rt></ruby>は<ruby><rb>水</rb><rt>みず</rt></ruby>を<ruby><rb>飲</rb><rt>の</rt></ruby>みます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Watashi wa mizu o nomimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I drink water.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>先生</rb><rt>せんせい</rt></ruby>は<ruby><rb>日本語</rb><rt>にほんご</rt></ruby>を<ruby><rb>話</rb><rt>はな</rt></ruby>します。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Sensei wa nihongo o hanashimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">The teacher speaks Japanese.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>私</rb><rt>わたし</rt></ruby>は<ruby><rb>映画</rb><rt>えいが</rt></ruby>を<ruby><rb>見</rb><rt>み</rt></ruby>ます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Watashi wa eiga o mimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I watch a movie.</p>
                            </div>
                        </div>

                        <div class="example-box">
                            <span class="mistake-tag">Common Mistake</span>
                            <p style="font-size: 0.9rem;">Japanese learners often forget that the verb <strong>must</strong> come at the very end. Avoid saying "Watashi wa tabemasu sushi" as it sounds unnatural.</p>
                        </div>
                    </div>
                </div>
            `,
            'verbs': `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <h1>2. Verb Basics (Conjugation)</h1>
                    </div>
                    <p>Japanese verbs are categorized into three groups. Understanding these groups is essential for correct conjugation into polite (~masu) and casual forms.</p>
                    
                    <div class="formation-box">
                        <strong>Verb Groups:</strong><br>
                        • <strong>Group 1 (U-verbs):</strong> End in 'u' sounds (e.g., Iku, Nomu).<br>
                        • <strong>Group 2 (Ru-verbs):</strong> End in 'iru' or 'eru' (e.g., Taberu, Miru).<br>
                        • <strong>Group 3 (Irregular):</strong> Only two verbs: Suru (to do) and Kuru (to come).
                    </div>

                    <table class="conjugation-table">
                        <tr><th>Group</th><th>Dictionary Form</th><th>Polite (~masu)</th><th>Meaning</th></tr>
                        <tr><td>Group 2</td><td><ruby><rb>食</rb><rt>た</rt></ruby>べる</td><td><ruby><rb>食</rb><rt>た</rt></ruby>べます</td><td>To eat</td></tr>
                        <tr><td>Group 1</td><td><ruby><rb>行</rb><rt>い</rt></ruby>く</td><td><ruby><rb>行</rb><rt>い</rt></ruby>きます</td><td>To go</td></tr>
                        <tr><td>Group 1</td><td><ruby><rb>飲</rb><rt>の</rt></ruby>む</td><td><ruby><rb>飲</rb><rt>の</rt></ruby>みます</td><td>To drink</td></tr>
                        <tr><td>Group 3</td><td>する</td><td>します</td><td>To do</td></tr>
                        <tr><td>Group 3</td><td><ruby><rb>来</rb><rt>く</rt></ruby>る</td><td><ruby><rb>来</rb><rt>き</rt></ruby>ます</td><td>To come</td></tr>
                    </table>

                    <div class="grammar-grid">
                        <div class="example-box">
                            <h4>Detailed Examples</h4>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>昨日</rb><rt>きのう</rt></ruby>、<ruby><rb>寿司</rb><rt>すし</rt></ruby>を<ruby><rb>食</rb><rt>た</rt></ruby>べました。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Kinou, sushi o tabemashita.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I ate sushi yesterday.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>明日</rb><rt>あした</rt></ruby>、<ruby><rb>学校</rb><rt>がっこう</rt></ruby>に<ruby><rb>行</rb><rt>い</rt></ruby>きます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Ashita, gakkou ni ikimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I will go to school tomorrow.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>今</rb><rt>いま</rt></ruby>、コーヒーを<ruby><rb>飲</rb><rt>の</rt></ruby>みます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Ima, ko-hi- o nomimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I drink coffee now.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>毎日</rb><rt>まいにち</rt></ruby><ruby><rb>勉強</rb><rt>べんきょう</rt></ruby>をします。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Mainichi benkyou o shimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I study every day.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>友達</rb><rt>ともだち</rt></ruby>が<ruby><rb>家</rb><rt>うち</rt></ruby>に<ruby><rb>来</rb><rt>き</rt></ruby>ます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Tomodachi ga uchi ni kimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">A friend is coming to my house.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            'adjectives': `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <h1>3. Adjectives (I vs Na)</h1>
                    </div>
                    <p>Japanese adjectives are divided into two types: <strong>I-adjectives</strong> and <strong>Na-adjectives</strong>. They behave differently when modifying nouns or ending sentences.</p>
                    
                    <div class="formation-box">
                        <strong>Key Differences:</strong><br>
                        • <strong>I-adjectives:</strong> End in 'i' (e.g., Oishii, Samui). They conjugate directly.<br>
                        • <strong>Na-adjectives:</strong> Need 'na' before a noun (e.g., Kirei na, Shizuka na). They behave like nouns.
                    </div>

                    <div class="grammar-grid">
                        <div class="example-box">
                            <h4>Detailed Examples</h4>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;">この<ruby><rb>寿司</rb><rt>すし</rt></ruby>はとても<ruby><rb>美味</rb><rt>おい</rt></ruby>しいです。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Kono sushi wa totemo oishii desu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">This sushi is very delicious.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>綺麗</rb><rt>きれい</rt></ruby>な<ruby><rb>花</rb><rt>はな</rt></ruby>ですね。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Kirei na hana desu ne.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">It's a beautiful flower, isn't it?</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>今日</rb><rt>きょう</rt></ruby>はとても<ruby><rb>寒</rb><rt>さむ</rt></ruby>いです。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Kyou wa totemo samui desu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Today is very cold.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem; font-weight: 600;"><ruby><rb>静</rb><rt>しず</rt></ruby>かな<ruby><rb>部屋</rb><rt>へや</rt></ruby>が<ruby><rb>好</rb><rt>す</rt></ruby>きです。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Shizuka na heya ga suki desu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I like quiet rooms.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>高</rb><rt>たか</rt></ruby>い<ruby><rb>時計</rb><rt>とけい</rt></ruby>を<ruby><rb>買</rb><rt>か</rt></ruby>いました。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Takai tokei o kaimashita.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I bought an expensive watch.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            'existence': `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <h1>4. Question & Existence</h1>
                    </div>
                    <p>Japanese uses two different verbs for "to exist" depending on whether the subject is animate (living) or inanimate (non-living).</p>
                    
                    <div class="formation-box">
                        <strong>Existence Verbs:</strong><br>
                        • <strong>あります (arimasu):</strong> For objects, plants, and abstract things.<br>
                        • <strong>います (imasu):</strong> For people and animals.
                    </div>

                    <div class="grammar-grid">
                        <div class="example-box">
                            <h4>Detailed Examples</h4>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>机</rb><rt>つくえ</rt></ruby>の<ruby><rb>上</rb><rt>うえ</rt></ruby>に<ruby><rb>本</rb><rt>ほん</rt></ruby>があります。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Tsukue no ue ni hon ga arimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">There is a book on the desk.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>庭</rb><rt>にわ</rt></ruby>に<ruby><rb>猫</rb><rt>ねこ</rt></ruby>がいます。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Niwa ni neko ga imasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">There is a cat in the garden.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>先生</rb><rt>せんせい</rt></ruby>はどこにいますか？</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Sensei wa doko ni imasu ka?</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Where is the teacher?</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>駅</rb><rt>えき</rt></ruby>はどこですか？</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Eki wa doko desu ka?</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Where is the station?</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>車</rb><rt>くるま</rt></ruby>があります。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Kuruma ga arimasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">There is a car.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            'te-form': `
                <div class="lesson-card">
                    <div class="lesson-header">
                        <h1>5. Te-form (Requests & Connection)</h1>
                    </div>
                    <p>The <strong>Te-form</strong> is one of the most important verb forms in Japanese. It is used to connect sentences, make requests, and express ongoing actions.</p>
                    
                    <div class="formation-box">
                        <strong>Common Usage:</strong><br>
                        • <strong>~te kudasai:</strong> Please do [action].<br>
                        • <strong>~te mo ii desu ka:</strong> May I do [action]?<br>
                        • <strong>~te imasu:</strong> I am doing [action].
                    </div>

                    <div class="grammar-grid">
                        <div class="example-box">
                            <h4>Detailed Examples</h4>
                            
                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;">ちょっと<ruby><rb>待</rb><rt>ま</rt></ruby>ってください。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Chotto matte kudasai.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Please wait a moment.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>食</rb><rt>た</rt></ruby>べてください。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Tabete kudasai.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Please eat.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>行</rb><rt>い</rt></ruby>ってください。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Itte kudasai.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Please go.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;">テレビを<ruby><rb>見</rb><rt>み</rt></ruby>ています。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Terebi o mite imasu.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">I am watching TV.</p>
                            </div>

                            <div style="margin-bottom: 1.5rem;">
                                <p style="font-family: var(--font-jp); font-size: 1.3rem;"><ruby><rb>水</rb><rt>みず</rt></ruby>を<ruby><rb>飲</rb><rt>の</rt></ruby>んでください。</p>
                                <p style="font-style: italic; color: var(--text-light); font-size: 0.9rem;">Mizu o nonde kudasai.</p>
                                <p style="font-weight: 600; color: var(--primary-color);">Please drink water.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `
        };

        let currentLessonIndex = 0;
        const lessonIds = Object.keys(lessons);

        function showLesson(id, element) {
            if (!element) {
                element = document.querySelector(`.topic-item[onclick*="'${id}'"]`);
            }
            document.querySelectorAll('.topic-item').forEach(item => item.classList.remove('active'));
            if (element) element.classList.add('active');

            currentLessonIndex = lessonIds.indexOf(id);
            const lesson = lessons[id];
            const wrapper = document.getElementById('book-pages-wrapper');

            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = lesson;

            const header = tempDiv.querySelector('.lesson-header').outerHTML;
            const intro = tempDiv.querySelector('p').outerHTML;
            const formation = tempDiv.querySelector('.formation-box').outerHTML;

            const grid = tempDiv.querySelector('.grammar-grid') || tempDiv.querySelector('.conjugation-table');
            const gridHtml = grid ? grid.outerHTML : '';

            wrapper.innerHTML = `
                <div class="book-page">
                    ${header}
                    ${intro}
                    ${formation}
                </div>
                <div class="book-page">
                    <h3 style="margin-bottom: 1rem; color: var(--primary-color);">Examples & Usage</h3>
                    ${gridHtml}
                </div>
            `;

            // Update nav visibility
            document.querySelector('.book-nav.prev').style.display = currentLessonIndex > 0 ? 'flex' : 'none';
            document.querySelector('.book-nav.next').style.display = currentLessonIndex < lessonIds.length - 1 ? 'flex' : 'none';
        }

        function navigateLesson(direction) {
            const nextIndex = currentLessonIndex + direction;
            if (nextIndex >= 0 && nextIndex < lessonIds.length) {
                showLesson(lessonIds[nextIndex]);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            showLesson('basics', document.querySelector('.topic-item'));
        });


    </script>
</body>

</html>